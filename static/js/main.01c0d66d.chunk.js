(this["webpackJsonpbunkstur-ui"]=this["webpackJsonpbunkstur-ui"]||[]).push([[0],{378:function(e,t,n){},379:function(e,t,n){},455:function(e,t,n){"use strict";n.r(t);var r=n(29),a=n.n(r),c=n(62),i=n(0),s=n.n(i),o=n(18),u=n.n(o),l=(n(378),n(379),n(15)),d=(n(179),n(9));function j(e){return null!=b()?Object(d.jsx)(d.Fragment,{children:e.children}):Object(d.jsx)(d.Fragment,{})}function b(){return l.a.auth().currentUser}function p(){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=b())||void 0===t?void 0:t.getIdToken();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return null==b()?Object(d.jsx)(d.Fragment,{children:e.children}):Object(d.jsx)(d.Fragment,{})}function O(){return(O=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.a.auth().signOut());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(349),v=n.n(x),g=n(46),m={signInFlow:"redirect",signInSuccessUrl:"".concat("/Bunkstur-UI","/"),signInOptions:[l.a.auth.GoogleAuthProvider.PROVIDER_ID]};function y(){return Object(d.jsxs)("div",{className:"center",style:{textAlign:"center",paddingTop:"100px"},children:[Object(d.jsx)("img",{src:"".concat("/Bunkstur-UI","/logo192.png"),alt:"Logo"}),Object(d.jsxs)("div",{className:"center",style:{textAlign:"center",padding:"30px",color:"#808080",fontSize:"20px"},children:[Object(d.jsx)(g.a,{variant:"h1",children:"Bunkstur"}),Object(d.jsx)(g.a,{variant:"subtitle1",children:"Count the Number of lectures attended"})]}),Object(d.jsx)("div",{style:{display:"inline-block",height:"50%",width:"70%"},children:Object(d.jsx)(v.a,{uiConfig:m,firebaseAuth:l.a.auth()})})]})}var w=n(490),k=n(258),S=n(351),C=n(167),T=n(57),A=n(256),I=n.n(A),D=n(117),E=n(467),P=n(491),L=n(115),N=n(493),B=n(469),F=n(470),q=n(492),G=n(497),R=n(218),J=n(322),U=n(356),z=n.n(U),M=n(357),H=n.n(M),Z=n(204),K=n(35),Q=n(495),V=n(498);function _(e){var t=e.open,n=e.onClose,r=e.onSubmit,s=e.subjects,o=Object(i.useState)(s[0]||""),u=Object(T.a)(o,2),l=u[0],j=u[1],b=Object(i.useState)("P"),p=Object(T.a)(b,2),h=p[0],f=p[1],O=Object(i.useState)(new Date),x=Object(T.a)(O,2),v=x[0],g=x[1],m=Object(i.useState)(new Date),y=Object(T.a)(m,2),S=y[0],C=y[1],A=Object(i.useState)(new Date),I=Object(T.a)(A,2),U=I[0],M=I[1];return Object(d.jsxs)(E.a,{open:t,scroll:"body","aria-labelledby":"form-dialog-title",children:[Object(d.jsx)(N.a,{children:"Mark attendance"}),Object(d.jsx)(P.a,{}),Object(d.jsx)(w.a,{style:{backgroundColor:"#3f51b5",maxHeight:"8vh"},position:"static",children:Object(d.jsx)(k.a,{children:Object(d.jsx)(L.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(d.jsx)(z.a,{})})})}),Object(d.jsx)(B.a,{children:Object(d.jsxs)("form",{id:"attendance-form",onSubmit:function(){var e=Object(c.a)(a.a.mark((function e(t){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={subject:l,attendanceType:h,date:v.toLocaleDateString("en-CA"),start:S.toLocaleTimeString("en-GB").substr(0,5),end:U.toLocaleTimeString("en-GB").substr(0,5)},t.preventDefault(),e.next=4,r(c);case 4:return n(),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(d.jsx)(q.a,{children:"Subject"}),Object(d.jsx)(G.a,{freeSolo:!0,"aria-required":"true",options:s,autoHighlight:!0,value:l,onInputChange:function(e,t){j((t||"").trim())},renderInput:function(e){return Object(d.jsx)(R.a,Object(D.a)(Object(D.a)({},e),{},{label:"Select subject",variant:"outlined",required:!0,inputProps:Object(D.a)({},e.inputProps)}))}}),Object(d.jsx)(q.a,{children:"Type"}),Object(d.jsxs)(R.a,{select:!0,id:"attType",label:"Attendance type",required:!0,"aria-required":"true",value:h,variant:"outlined",onChange:function(e){var t=e.target.value;return f(t)},helperText:"Select attendance type",children:[Object(d.jsx)(J.a,{value:"A",children:"Absent"},"A"),Object(d.jsx)(J.a,{value:"P",selected:!0,children:"Present"},"P"),Object(d.jsx)(J.a,{value:"N",children:"No lecture"},"N")]}),Object(d.jsxs)(K.a,{utils:Z.default,children:[Object(d.jsx)(q.a,{children:"Date"}),Object(d.jsx)(Q.a,{id:"date",label:"Date",value:v,clearable:!0,required:!0,onChange:g,helperText:"Choose date"}),Object(d.jsx)(q.a,{children:"Start time"}),Object(d.jsx)(V.a,{id:"start",label:"Start time",value:S,required:!0,clearable:!0,minutesStep:5,onChange:function(e){null!=e?(null!=U&&e>=U&&(e=null),C(e)):C(e)},helperText:"Choose start time"}),Object(d.jsx)(q.a,{children:"End time"}),Object(d.jsx)(V.a,{id:"end",label:"End time",value:U,required:!0,clearable:!0,minutesStep:5,onChange:function(e){null!=e?(null!=S&&e<=S&&(e=null),M(e)):M(e)},helperText:"Choose end time"})]})]})}),Object(d.jsx)(F.a,{children:Object(d.jsxs)(L.a,{type:"submit",form:"attendance-form",children:[Object(d.jsx)(H.a,{color:"primary"}),"Mark"]})})]})}var W=n(358),X=n.n(W),Y=n(359),$=n.n(Y),ee=n(360),te=n.n(ee),ne=n(142),re=n.n(ne);function ae(){var e=s.a.useState([]),t=Object(T.a)(e,2),n=t[0],r=t[1],o=s.a.useState([]),u=Object(T.a)(o,2),l=u[0],j=u[1];s.a.useEffect((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("subjects");case 3:t=e.sent,j(Array.from(new Set([].concat(Object(C.a)(l),Object(C.a)(t))))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var b=function(){var e=Object(i.useState)(!1),t=Object(T.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(null),o=Object(T.a)(s,2),u=o[0],l=o[1];return{isLoading:n,error:u,sendRequest:Object(i.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,i,s,o,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",c=u.length>2&&void 0!==u[2]?u[2]:null,i=u.length>3&&void 0!==u[3]?u[3]:{},r(!0),e.prev=4,e.t0=fetch,e.t1="".concat("https://bunkstur.herokuapp.com","/api/v1/").concat(t),e.t2=n,e.t3=c,e.t4=D.a,e.t5=Object(D.a)({},i),e.t6={},e.t7="Bearer ",e.next=15,p();case 15:return e.t8=e.sent,e.t9=e.t7.concat.call(e.t7,e.t8),e.t10={Authorization:e.t9},e.t11=(0,e.t4)(e.t5,e.t6,e.t10),e.t12={method:e.t2,body:e.t3,mode:"cors",headers:e.t11,redirect:"follow"},e.next=22,(0,e.t0)(e.t1,e.t12);case 22:if((s=e.sent).ok){e.next=25;break}throw new Error(s.status+" : "+s.statusText+" : ");case 25:return o=null,e.prev=26,e.next=29,s.json();case 29:o=e.sent,e.next=34;break;case 32:e.prev=32,e.t13=e.catch(26);case 34:return r(!1),e.abrupt("return",o);case 38:throw e.prev=38,e.t14=e.catch(4),l(e.t14.message),r(!1),e.t14;case 43:case"end":return e.stop()}}),e,null,[[4,38],[26,32]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:function(){l(null)}}}().sendRequest,h=function(){var e=Object(i.useState)(!0),t=Object(T.a)(e,2),n=t[0],r=t[1];return{refresh:n,refreshNow:function(){r(!n)}}}(),f=h.refresh,O=h.refreshNow,x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(i.useState)(e),n=Object(T.a)(t,2),r=n[0],a=n[1];return{isOpen:r,open:function(){a(!0)},close:function(){a(!1)}}}(),v=x.isOpen,g=x.open,m=x.close,y={};return s.a.useEffect((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t,n,c,i,s,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,p();case 3:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.prev=5,(t={}).A="Absent",t.P="Present",t.N="No lecture",e.next=12,b("attendance");case 12:n=e.sent,console.log(n),c=Object(S.a)(n);try{for(c.s();!(i=c.n()).done;)s=i.value,o=s.subject,u=s.attendanceType,null==y[o]&&(y[o]={}),y[o][u]=(y[o][u]||0)+1,y[o].Total=(y[o].Total||0)+1}catch(a){c.e(a)}finally{c.f()}j(Array.from(new Set([].concat(Object(C.a)(l),Object(C.a)(Object.keys(y)))))),console.log(y),n=n.map((function(e){var n=e.subject,r=e.date,a=e.start,c=e.end,i=e.uuid,s=e.attendanceType;return{subject:n,date:new Date(r),start:re()(a,"hh:mm").toDate(),end:re()(c,"hh:mm").toDate(),uuid:i,attendanceType:"".concat(t[s]," ").concat(y[n][s]/y[n].Total*100)}})),r(n),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(5),console.error(e.t2);case 25:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(_,{open:v,onClose:m,subjects:l,onSubmit:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(JSON.stringify(t)),e.next=3,b("attendance","POST",JSON.stringify(t),{"Content-Type":"Application/json"});case 3:O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(d.jsx)(I.a,{title:"Attendance Records",data:n,columns:[{title:"Subject",field:"subject",type:"string",defaultGroupOrder:0,groupTitle:"Subjects"},{title:"Attendance",field:"attendanceType",defaultGroupOrder:1,render:function(e){return e}},{title:"Date",field:"date",type:"date",render:function(e){return re()(e.date||e).format("LL")}},{title:"Start",field:"start",type:"time",render:function(e){return re()(e.start).format("LT")}},{title:"End",field:"end",type:"time",render:function(e){return re()(e.end).format("LT")}}],actions:[{icon:X.a,tooltip:"Delete attendance record",onClick:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.isArray(n)?n[0]:n,c=r.uuid,e.next=3,b("attendance/".concat(c),"DELETE");case 3:O();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),position:"row"},{icon:$.a,position:"toolbar",tooltip:"Add attendance record",onClick:function(e,t){g()}},{icon:te.a,position:"toolbar",tooltip:"Refresh",onClick:function(e,t){return O()}}],options:{grouping:!0,addRowPosition:"first",rowStyle:{backgroundColor:"#EEE"},paging:!1,actionsColumnIndex:-1}})]})}var ce=n(361),ie=n.n(ce);var se=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)(w.a,{position:"static",children:Object(d.jsxs)(k.a,{children:[Object(d.jsx)("div",{style:{textAlign:"center"},children:Object(d.jsxs)(g.a,{variant:"h3",color:"inherit",children:["Bunkstur",Object(d.jsx)(g.a,{variant:"h6",color:"inherit",children:"Attendance Calculator"})]})}),Object(d.jsx)(L.a,{style:{alignItems:"end",position:"absolute",right:"2vw",height:"100%"},onClick:function(){(function(){return O.apply(this,arguments)})().then((function(){window.location.href="".concat("/Bunkstur-UI","/")}))},children:Object(d.jsxs)("div",{children:[Object(d.jsx)(ie.a,{}),Object(d.jsx)("br",{}),"LOGOUT"]})})]})}),Object(d.jsx)(ae,{})]})}),Object(d.jsx)(f,{children:Object(d.jsx)(y,{})})]})},oe=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,872)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},ue={apiKey:"AIzaSyBuAD8yempb8JnNnl5-GyMfZh0ms5bgg3o",authDomain:"bunkstur.firebaseapp.com",projectId:"bunkstur",storageBucket:"bunkstur.appspot.com",messagingSenderId:"757435315429",appId:"1:757435315429:web:1e1a63a02566a1f256d00c",measurementId:"G-JCQ753ZH2C"};function le(){return(le=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return new Promise((function(t,n){var r=e.onAuthStateChanged((function(e){r(),t(e)}),n)}))},l.a.initializeApp(ue),e.next=4,t(l.a.auth());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return le.apply(this,arguments)})().then(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(se,{})}),document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))),oe()}},[[455,1,2]]]);
//# sourceMappingURL=main.01c0d66d.chunk.js.map