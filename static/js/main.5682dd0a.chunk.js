(this["webpackJsonpbunkstur-ui"]=this["webpackJsonpbunkstur-ui"]||[]).push([[0],{376:function(e,t,n){},377:function(e,t,n){},452:function(e,t,n){"use strict";n.r(t);var r=n(29),a=n.n(r),c=n(9),i=n(58),s=n(0),o=n.n(s),u=n(18),l=n.n(u),d=(n(376),n(377),n(15));n(176);function j(e){return null!=b()?Object(c.jsx)(c.Fragment,{children:e.children}):Object(c.jsx)(c.Fragment,{})}function b(){return d.a.auth().currentUser}function p(){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=b())||void 0===t?void 0:t.getIdToken();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return null==b()?Object(c.jsx)(c.Fragment,{children:e.children}):Object(c.jsx)(c.Fragment,{})}function O(){return(O=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.auth().signOut());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(346),v=n.n(x),g=n(47),m={signInFlow:"redirect",signInSuccessUrl:"".concat("/Bunkstur-UI","/"),signInOptions:[d.a.auth.GoogleAuthProvider.PROVIDER_ID]};function y(){return Object(c.jsxs)("div",{className:"center",style:{textAlign:"center",paddingTop:"100px"},children:[Object(c.jsx)("img",{src:"".concat("/Bunkstur-UI","/logo192.png"),alt:"Logo"}),Object(c.jsxs)("div",{className:"center",style:{textAlign:"center",padding:"30px",color:"#808080",fontSize:"20px"},children:[Object(c.jsx)(g.a,{variant:"h1",children:"Bunkstur"}),Object(c.jsx)(g.a,{variant:"subtitle1",children:"Count the Number of lectures attended"})]}),Object(c.jsx)("div",{style:{display:"inline-block",height:"50%",width:"70%"},children:Object(c.jsx)(v.a,{uiConfig:m,firebaseAuth:d.a.auth()})})]})}var k=n(487),w=n(255),S=n(348),C=n(46),T=n(253),A=n.n(T),I=n(117),D=n(464),E=n(488),P=n(115),L=n(490),N=n(466),B=n(467),q=n(489),F=n(494),G=n(214),R=n(319),J=n(353),U=n.n(J),z=n(354),M=n.n(z);var H=n(201),Z=n(35),K=n(492),Q=n(495);function V(e){var t=e.open,n=e.onClose,r=e.sendRequest,o=e.onSubmit,u=function(e){var t=Object(s.useState)([]),n=Object(C.a)(t,2),r=n[0],c=n[1];return Object(s.useEffect)((function(){function t(){return(t=Object(i.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e("subjects");case 3:n=t.sent,c(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r}(r),l=Object(s.useState)("aa"),d=Object(C.a)(l,2),j=d[0],b=d[1],p=Object(s.useState)("P"),h=Object(C.a)(p,2),f=h[0],O=h[1],x=Object(s.useState)(new Date),v=Object(C.a)(x,2),g=v[0],m=v[1],y=Object(s.useState)(new Date),S=Object(C.a)(y,2),T=S[0],A=S[1],J=Object(s.useState)(new Date),z=Object(C.a)(J,2),V=z[0],_=z[1];return Object(c.jsxs)(D.a,{open:t,scroll:"body","aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(L.a,{children:"Mark attendance"}),Object(c.jsx)(E.a,{}),Object(c.jsx)(k.a,{style:{backgroundColor:"#3f51b5",maxHeight:"8vh"},position:"static",children:Object(c.jsx)(w.a,{children:Object(c.jsx)(P.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(c.jsx)(U.a,{})})})}),Object(c.jsx)(N.a,{children:Object(c.jsxs)("form",{id:"attendance-form",onSubmit:function(){var e=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={subject:j,attendanceType:f,date:g.toLocaleDateString("en-CA"),start:T.toLocaleTimeString("en-GB").substr(0,5),end:V.toLocaleTimeString("en-GB").substr(0,5)},t.preventDefault(),e.next=4,o(r);case 4:return n(),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsx)(q.a,{children:"Subject"}),Object(c.jsx)(F.a,{freeSolo:!0,"aria-required":"true",options:u,autoHighlight:!0,value:j,onInputChange:function(e,t){b((t||"").trim())},renderInput:function(e){return Object(c.jsx)(G.a,Object(I.a)(Object(I.a)({},e),{},{label:"Select subject",variant:"outlined",required:!0,inputProps:Object(I.a)({},e.inputProps)}))}}),Object(c.jsx)(q.a,{children:"Type"}),Object(c.jsxs)(G.a,{select:!0,id:"attType",label:"Attendance type",required:!0,"aria-required":"true",value:f,variant:"outlined",onChange:function(e){var t=e.target.value;return O(t)},helperText:"Select attendance type",children:[Object(c.jsx)(R.a,{value:"A",children:"Absent"},"A"),Object(c.jsx)(R.a,{value:"P",selected:!0,children:"Present"},"P"),Object(c.jsx)(R.a,{value:"N",children:"No lecture"},"N")]}),Object(c.jsxs)(Z.a,{utils:H.default,children:[Object(c.jsx)(q.a,{children:"Date"}),Object(c.jsx)(K.a,{id:"date",label:"Date",value:g,clearable:!0,required:!0,onChange:m,helperText:"Choose date"}),Object(c.jsx)(q.a,{children:"Start time"}),Object(c.jsx)(Q.a,{id:"start",label:"Start time",value:T,required:!0,clearable:!0,minutesStep:5,onChange:function(e){null!=e?(null!=V&&e>=V&&(e=null),A(e)):A(e)},helperText:"Choose start time"}),Object(c.jsx)(q.a,{children:"End time"}),Object(c.jsx)(Q.a,{id:"end",label:"End time",value:V,required:!0,clearable:!0,minutesStep:5,onChange:function(e){null!=e?(null!=T&&e<=T&&(e=null),_(e)):_(e)},helperText:"Choose end time"})]})]})}),Object(c.jsx)(B.a,{children:Object(c.jsxs)(P.a,{type:"submit",form:"attendance-form",children:[Object(c.jsx)(M.a,{color:"primary"}),"Mark"]})})]})}var _=n(355),W=n.n(_),X=n(356),Y=n.n(X),$=n(357),ee=n.n($),te=n(141),ne=n.n(te);function re(){var e=o.a.useState([]),t=Object(C.a)(e,2),n=t[0],r=t[1],u=function(){var e=Object(s.useState)(!1),t=Object(C.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(null),o=Object(C.a)(c,2),u=o[0],l=o[1];return{isLoading:n,error:u,sendRequest:Object(s.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,c,i,s,o,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",c=u.length>2&&void 0!==u[2]?u[2]:null,i=u.length>3&&void 0!==u[3]?u[3]:{},r(!0),e.prev=4,e.t0=fetch,e.t1="".concat("https://bunkstur.herokuapp.com","/api/v1/").concat(t),e.t2=n,e.t3=c,e.t4=I.a,e.t5=Object(I.a)({},i),e.t6={},e.t7="Bearer ",e.next=15,p();case 15:return e.t8=e.sent,e.t9=e.t7.concat.call(e.t7,e.t8),e.t10={Authorization:e.t9},e.t11=(0,e.t4)(e.t5,e.t6,e.t10),e.t12={method:e.t2,body:e.t3,mode:"cors",headers:e.t11,redirect:"follow"},e.next=22,(0,e.t0)(e.t1,e.t12);case 22:if((s=e.sent).ok){e.next=25;break}throw new Error(s.status+" : "+s.statusText+" : ");case 25:return o=null,e.prev=26,e.next=29,s.json();case 29:o=e.sent,e.next=34;break;case 32:e.prev=32,e.t13=e.catch(26);case 34:return r(!1),e.abrupt("return",o);case 38:throw e.prev=38,e.t14=e.catch(4),l(e.t14.message),r(!1),e.t14;case 43:case"end":return e.stop()}}),e,null,[[4,38],[26,32]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:function(){l(null)}}}().sendRequest,l=function(){var e=Object(s.useState)(!0),t=Object(C.a)(e,2),n=t[0],r=t[1];return{refresh:n,refreshNow:function(){r(!n)}}}(),d=l.refresh,j=l.refreshNow,b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.useState)(e),n=Object(C.a)(t,2),r=n[0],a=n[1];return{isOpen:r,open:function(){a(!0)},close:function(){a(!1)}}}(),h=b.isOpen,f=b.open,O=b.close,x={};return o.a.useEffect((function(){function e(){return(e=Object(i.a)(a.a.mark((function e(){var t,n,c,i,s,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,p();case 3:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.prev=5,(t={}).A="Absent",t.P="Present",t.N="No lecture",e.next=12,u("attendance");case 12:n=e.sent,console.log(n),c=Object(S.a)(n);try{for(c.s();!(i=c.n()).done;)s=i.value,o=s.subject,l=s.attendanceType,null==x[o]&&(x[o]={}),x[o][l]=(x[o][l]||0)+1,x[o].Total=(x[o].Total||0)+1}catch(a){c.e(a)}finally{c.f()}console.log(x),n=n.map((function(e){var n=e.subject,r=e.date,a=e.start,c=e.end,i=e.uuid,s=e.attendanceType;return{subject:n,date:new Date(r),start:ne()(a,"hh:mm").toDate(),end:ne()(c,"hh:mm").toDate(),uuid:i,attendanceType:"".concat(t[s]," ").concat(x[n][s]/x[n].Total*100)}})),r(n),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(5),console.error(e.t2);case 24:case"end":return e.stop()}}),e,null,[[5,21]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(V,{open:h,onClose:O,sendRequest:u,onSubmit:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(JSON.stringify(t)),e.next=3,u("attendance","POST",JSON.stringify(t),{"Content-Type":"Application/json"});case 3:j();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(c.jsx)(A.a,{title:"Attendance Records",data:n,columns:[{title:"Subject",field:"subject",type:"string",defaultGroupOrder:0,groupTitle:"Subjects"},{title:"Attendance",field:"attendanceType",defaultGroupOrder:1,render:function(e){return e}},{title:"Date",field:"date",type:"date",render:function(e){return ne()(e.date||e).format("LL")}},{title:"Start",field:"start",type:"time",render:function(e){return ne()(e.start).format("LT")}},{title:"End",field:"end",type:"time",render:function(e){return ne()(e.end).format("LT")}}],actions:[{icon:W.a,tooltip:"Delete attendance record",onClick:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.isArray(n)?n[0]:n,c=r.uuid,e.next=3,u("attendance/".concat(c),"DELETE");case 3:j();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),position:"row"},{icon:Y.a,position:"toolbar",tooltip:"Add attendance record",onClick:function(e,t){f()}},{icon:ee.a,position:"toolbar",tooltip:"Refresh",onClick:function(e,t){return j()}}],options:{grouping:!0,addRowPosition:"first",rowStyle:{backgroundColor:"#EEE"},paging:!1,actionsColumnIndex:-1}})]})}var ae=n(358),ce=n.n(ae);var ie=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j,{children:Object(c.jsxs)("div",{children:[Object(c.jsx)(k.a,{position:"static",children:Object(c.jsxs)(w.a,{children:[Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsxs)(g.a,{variant:"h3",color:"inherit",children:["Bunkstur",Object(c.jsx)(g.a,{variant:"h6",color:"inherit",children:"Attendance Calculator"})]})}),Object(c.jsx)(P.a,{style:{alignItems:"end",position:"absolute",right:"2vw",height:"100%"},onClick:function(){(function(){return O.apply(this,arguments)})().then((function(){window.location.href="".concat("/Bunkstur-UI","/")}))},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(ce.a,{}),Object(c.jsx)("br",{}),"LOGOUT"]})})]})}),Object(c.jsx)(re,{})]})}),Object(c.jsx)(f,{children:Object(c.jsx)(y,{})})]})},se=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,869)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},oe={apiKey:"AIzaSyBuAD8yempb8JnNnl5-GyMfZh0ms5bgg3o",authDomain:"bunkstur.firebaseapp.com",projectId:"bunkstur",storageBucket:"bunkstur.appspot.com",messagingSenderId:"757435315429",appId:"1:757435315429:web:1e1a63a02566a1f256d00c",measurementId:"G-JCQ753ZH2C"};function ue(){return(ue=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return new Promise((function(t,n){var r=e.onAuthStateChanged((function(e){r(),t(e)}),n)}))},d.a.initializeApp(oe),e.next=4,t(d.a.auth());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return ue.apply(this,arguments)})().then(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(ie,{})}),document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))),se()}},[[452,1,2]]]);
//# sourceMappingURL=main.5682dd0a.chunk.js.map